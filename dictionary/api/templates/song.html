{% extends "base.html" %}

{% block title %} {{ song.title }}{% endblock %}

{% block content %}
    {% load rest_framework %}
    <div class="song" data-song-id="{{ song.id }}">
        <div class="h2">{{ song.title }}</div>
        {% for artist in primary_artists %}
            <div class="h4 primary-artist" data-artist-id="{{ artist.id }}">
                <a href="{% url 'artist-highlight' pk=artist.id %}">{{ artist.name }}</a>
            </div>
        {% endfor %}
        {% if feat_artists %}
            <div class="h4">feat.
            {% for artist in feat_artists %}
                <span class="artist">
                    <a href="{% url 'artist-highlight' pk=artist.id %}">{{ artist.name }}</a>
                </span>{% if not forloop.last %}, {% endif %}
            {% endfor %}
            </div>
        {% endif %}
        <div class="h5">{{ song.release_date }}</div>
        <br/>
        <div class="h6">{{ song.lyrics|linebreaks }}</div>
    </div>
    <button class="btn btn-info btn-sm" onclick="getSelectionText();">Inject text</button>
    <br/>
    <br/>
    <form action="{% url 'example-list' %}" method="POST">
        {% csrf_token %}
        {% render_form example_serializer %}
        <input type="submit" value="Save">
    </form>
    <br/>
    <div class="examples list-group">
    {% for example in examples %}
        <a href="{% url 'example-highlight' pk=example.id %}" class="list-group-item">{{ example.text }}</a>
    {% endfor %}
    </div>
{% endblock %}

{% block scripts %}
<script>

function getSelectionText() {
    var textSelection = window.getSelection();
    var text = $("[name='text']");
    text.val(textSelection.toString());
}
</script>
{% endblock %}
